import{s as e,m as a,n as t,p as n,c as s,w as i,i as l,o,e as c,f as r,t as d,h as u,q as h,v as b,F as m,l as p,j as f,k as g}from"./index-D2V8Eyea.js";import{w as y}from"./wallet-manager.DtY3I8Qk.js";import{S as _}from"./Sidebar.DuSXkpyg.js";import{_ as w}from"./right.CKag88Jh.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=""+new URL("kaifang-CLkZ-A58.png",import.meta.url).href;const k=C({components:{Sidebar:_},data:()=>({walletConnected:!1,walletAddress:"",balance:0,chainId:null,username:"awm21萨法",refreshing:!1,sidebarOpen:!1,lobbyCards:[{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"},{duration:"3分钟",type:"大厅",openTime:"开放时间",timePerSession:"3分钟/次",remainingQuota:120,buttonText:"开放"}]}),onLoad(){console.log("钱包页面加载，检查连接状态..."),this.checkWalletStatus()},onShow(){console.log("钱包页面显示，检查钱包状态..."),this.checkWalletStatus()},methods:{async checkWalletStatus(){try{const e=await y.getNetworkInfo();console.log("钱包页面检查状态:",e),e.isConnected&&e.account?(this.walletConnected=!0,this.walletAddress=e.account,this.chainId=e.chainId,await this.loadBalance()):(this.walletConnected=!1,this.walletAddress="",this.chainId=null,this.balance=0)}catch(e){console.error("检查钱包状态失败:",e),this.walletConnected=!1,this.walletAddress="",this.balance=0}},async loadBalance(){try{const e=await y.getUSDTBalance(this.walletAddress);e.success?(this.balance=e.balance,console.log("余额加载成功:",this.balance)):(console.warn("余额加载失败:",e.error),this.balance=0)}catch(e){console.error("加载余额失败:",e),this.balance=0}},async refreshBalance(){if(this.walletConnected){this.refreshing=!0;try{await this.loadBalance(),e({title:"余额已刷新",icon:"success"})}catch(a){e({title:"刷新失败",icon:"none"})}finally{this.refreshing=!1}}else e({title:"请先连接钱包",icon:"none"})},formatAddress:e=>e?e.length<=10?e:e.substring(0,6)+"..."+e.substring(e.length-4):"",getCurrencySymbol(){return 1===this.chainId?"TRX":10===this.chainId?"ETH":56===this.chainId?"BNB":"TOKEN"},copyAddress(){this.walletAddress?a({data:this.walletAddress,success:()=>{e({title:"地址已复制",icon:"success"})}}):e({title:"无地址可复制",icon:"none"})},goToConnect(){t({url:"/pages/index/index"})},showSettings(){e({title:"设置功能开发中",icon:"none"})},openLobby(a){this.walletConnected?e({title:"开启大厅功能",icon:"none"}):e({title:"请先连接钱包",icon:"none"})},toggleSidebar(){console.log("toggleSidebar 被调用，当前状态:",this.sidebarOpen),this.sidebarOpen=!this.sidebarOpen,console.log("切换后状态:",this.sidebarOpen)},closeSidebar(){this.sidebarOpen=!1},handleSidebarMenuClick(e){console.log("侧边栏菜单点击:",e),this.closeSidebar()}}},[["render",function(e,a,t,y,_,C){const k=p,T=l,x=f,A=g,O=n("Sidebar");return o(),s(T,{class:"wallet-page"},{default:i((()=>[c(T,{class:"header-section"},{default:i((()=>[c(T,{class:"user-info"},{default:i((()=>[c(T,{class:"avatar"},{default:i((()=>[c(k,{class:"avatar-placeholder"},{default:i((()=>[r("👤")])),_:1})])),_:1}),c(T,{class:"user-details"},{default:i((()=>[c(k,{class:"username"},{default:i((()=>[r(d(C.formatAddress(_.walletAddress)||"awm21萨法"),1)])),_:1}),c(k,{class:"user-id"},{default:i((()=>[r("ID: 105215")])),_:1})])),_:1}),c(T,{class:"balance-display",onClick:C.refreshBalance},{default:i((()=>[c(k,{class:"balance-text"},{default:i((()=>[r("余额:")])),_:1}),c(k,{class:"balance-value"},{default:i((()=>[r(d(_.balance)+" U",1)])),_:1}),c(k,{class:"add-icon"},{default:i((()=>[r(d(_.refreshing?"⟳":"+"),1)])),_:1})])),_:1},8,["onClick"]),c(T,{class:"action-icons"},{default:i((()=>[c(x,{class:"icon",src:w,onClick:C.toggleSidebar},null,8,["onClick"])])),_:1})])),_:1})])),_:1}),_.walletConnected?u("",!0):(o(),s(T,{key:0,class:"connection-notice"},{default:i((()=>[c(k,{class:"notice-text"},{default:i((()=>[r("钱包未连接")])),_:1}),c(A,{class:"connect-btn",onClick:C.goToConnect},{default:i((()=>[r("连接钱包")])),_:1},8,["onClick"])])),_:1})),c(T,{class:"main-content"},{default:i((()=>[c(T,{class:"cards-grid"},{default:i((()=>[(o(!0),h(m,null,b(_.lobbyCards,((e,a)=>(o(),s(T,{class:"card",key:a,onClick:a=>C.openLobby(e)},{default:i((()=>[c(T,{class:"card-content"},{default:i((()=>[c(k,{class:"time-duration"},{default:i((()=>[r(d(e.duration),1)])),_:2},1024),c(k,{class:"lobby-type"},{default:i((()=>[r(d(e.type),1)])),_:2},1024),c(k,{class:"open-time"},{default:i((()=>[r(d(e.openTime),1)])),_:2},1024),c(k,{class:"time-per-session"},{default:i((()=>[r(d(e.timePerSession),1)])),_:2},1024),c(k,{class:"remaining-quota"},{default:i((()=>[r("剩余额度:"+d(e.remainingQuota),1)])),_:2},1024)])),_:2},1024),c(x,{class:"open-btn",src:S,onClick:a=>C.openLobby(e)},null,8,["onClick"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),c(O,{isOpen:_.sidebarOpen,onMenuClick:C.handleSidebarMenuClick},null,8,["isOpen","onMenuClick"]),_.sidebarOpen?(o(),s(T,{key:1,class:"sidebar-overlay",onClick:C.closeSidebar},null,8,["onClick"])):u("",!0)])),_:1})}],["__scopeId","data-v-9ee89417"]]);export{k as default};
